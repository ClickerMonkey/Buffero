<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Fri Jun 21 19:54:19 EDT 2013 -->
<TITLE>
AbstractBufferFactory
</TITLE>

<META NAME="date" CONTENT="2013-06-21">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractBufferFactory";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AbstractBufferFactory.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/magnos/io/buffer/AbstractBufferFactory.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractBufferFactory.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.magnos.io.buffer</FONT>
<BR>
Class AbstractBufferFactory</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.magnos.io.buffer.AbstractBufferFactory</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A>, <A HREF="../../../../org/magnos/io/Transferable.html" title="interface in org.magnos.io">Transferable</A>&lt;java.nio.ByteBuffer&gt;</DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../org/magnos/io/buffer/BufferFactoryBinary.html" title="class in org.magnos.io.buffer">BufferFactoryBinary</A>, <A HREF="../../../../org/magnos/io/buffer/BufferFactoryDirect.html" title="class in org.magnos.io.buffer">BufferFactoryDirect</A>, <A HREF="../../../../org/magnos/io/buffer/BufferFactoryFixed.html" title="class in org.magnos.io.buffer">BufferFactoryFixed</A>, <A HREF="../../../../org/magnos/io/buffer/BufferFactoryHeap.html" title="class in org.magnos.io.buffer">BufferFactoryHeap</A>, <A HREF="../../../../org/magnos/io/buffer/BufferFactoryMap.html" title="class in org.magnos.io.buffer">BufferFactoryMap</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>AbstractBufferFactory</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></DL>
</PRE>

<P>
An abstract implementation of a BufferFactory. This implementation provides
 the basic functionality for all aspects of a BufferFactory. Only a simple
 subset of functionality is left to the implementation (caching, allocating,
 filling, and clearing).

 Implementing factories should ensure concurrent access to any of their
 methods doesn't forfeit any of the integrity of the implementations internal
 structure. In other words the implementations must be thread safe.

 If the implementation has an more appropriate default size it is expected
 that this default size be set on instantiation of the factory.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Philip Diffenderfer</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#defaultSize">defaultSize</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.concurrent.atomic.AtomicLong</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#maxMemory">maxMemory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.concurrent.atomic.AtomicLong</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#usedMemory">usedMemory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#AbstractBufferFactory()">AbstractBufferFactory</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#allocate()">allocate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Allocates a ByteBuffer with the default size.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#allocate(int)">allocate</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a ByteBuffer with a limit of the given size and a capacity
 greater than or equal to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#clear()">clear</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clears the buffer factory of all cached buffers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#fill()">fill</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fills the BufferFactory cache (if it has one) with the maximum amount of
 buffers (or a sensible amount) and return the amount of memory which was
 allocated to fill the cache (in bytes).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#free(java.nio.ByteBuffer)">free</A></B>(java.nio.ByteBuffer&nbsp;buffer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disposes a ByteBuffer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#getAvailable()">getAvailable</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The amount of memory available to the factory for caching buffers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#getCapacity()">getCapacity</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The maximum amount of memory the factory can use to cache buffers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#getDefaultSize()">getDefaultSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The default size for allocating a ByteBuffer without specifying a desired
 size (i.e.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#getSize()">getSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The amount of memory this BufferFactory is using to store cached buffers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#onAllocate(int, java.util.concurrent.atomic.AtomicBoolean)">onAllocate</A></B>(int&nbsp;size,
           java.util.concurrent.atomic.AtomicBoolean&nbsp;cache)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requests that the implementation allocate a ByteBuffer with a capacity
 greater than or equal to the given size.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#onCache(java.nio.ByteBuffer)">onCache</A></B>(java.nio.ByteBuffer&nbsp;buffer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provides the implementation with a ByteBuffer to cache if it chooses to
 do so.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#onFill()">onFill</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requires the implementation to fill its cache with the maximum amount of
 cached memory (or a sensible amount) and return the amount of memory
 which was allocated to fill the cache (if any).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#onFree(java.nio.ByteBuffer)">onFree</A></B>(java.nio.ByteBuffer&nbsp;buffer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to deallocate the buffer from memory immediately.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;java.util.List&lt;java.nio.ByteBuffer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#onRelease()">onRelease</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requires the implementation to iterate over all cached buffers (if any)
 and remove each one from the cache and add it to a List structure.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.nio.ByteBuffer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#release()">release</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Releases all elements from this class.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#resize(java.nio.ByteBuffer, int)">resize</A></B>(java.nio.ByteBuffer&nbsp;old,
       int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Performs a resize on the given ByteBuffer if necessary.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#setCapacity(long)">setCapacity</A></B>(long&nbsp;capacity)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the maximum allowable amount of memory the factory can use to cache
 buffers.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#setDefaultSize(int)">setDefaultSize</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the default size for allocating a ByteBuffer without specifying a 
 desired size (i.e.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.nio.ByteBuffer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/magnos/io/buffer/AbstractBufferFactory.html#transfer(java.util.List)">transfer</A></B>(java.util.List&lt;java.nio.ByteBuffer&gt;&nbsp;elements)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transfers all given elements into this class.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="usedMemory"><!-- --></A><H3>
usedMemory</H3>
<PRE>
protected final java.util.concurrent.atomic.AtomicLong <B>usedMemory</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="maxMemory"><!-- --></A><H3>
maxMemory</H3>
<PRE>
protected final java.util.concurrent.atomic.AtomicLong <B>maxMemory</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="defaultSize"><!-- --></A><H3>
defaultSize</H3>
<PRE>
protected int <B>defaultSize</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AbstractBufferFactory()"><!-- --></A><H3>
AbstractBufferFactory</H3>
<PRE>
public <B>AbstractBufferFactory</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="onCache(java.nio.ByteBuffer)"><!-- --></A><H3>
onCache</H3>
<PRE>
protected abstract boolean <B>onCache</B>(java.nio.ByteBuffer&nbsp;buffer)</PRE>
<DL>
<DD>Provides the implementation with a ByteBuffer to cache if it chooses to
 do so. If the implementation cannot or will not cache the given buffer
 it should return false, if the buffer is cached for later retrieval then
 true should be returned.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>buffer</CODE> - The buffer to attempt to cache.
<DT><B>Returns:</B><DD>True if the buffer was cached, otherwise false.</DL>
</DD>
</DL>
<HR>

<A NAME="onAllocate(int, java.util.concurrent.atomic.AtomicBoolean)"><!-- --></A><H3>
onAllocate</H3>
<PRE>
protected abstract java.nio.ByteBuffer <B>onAllocate</B>(int&nbsp;size,
                                                  java.util.concurrent.atomic.AtomicBoolean&nbsp;cache)</PRE>
<DL>
<DD>Requests that the implementation allocate a ByteBuffer with a capacity
 greater than or equal to the given size. If the implementation was able
 to take a buffer from cache it should invoke cache.set(true).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - The minimum capacity of the buffer to allocate.<DD><CODE>cache</CODE> - The flag to set to true if the buffer was taken from cache and not
                allocated on the spot.
<DT><B>Returns:</B><DD>The ByteBuffer allocated. The capacity must be greater than or equal
                to the given size, but the ByteBuffers properties (position, limit)
                have no required state.</DL>
</DD>
</DL>
<HR>

<A NAME="onFill()"><!-- --></A><H3>
onFill</H3>
<PRE>
protected abstract long <B>onFill</B>()</PRE>
<DL>
<DD>Requires the implementation to fill its cache with the maximum amount of
 cached memory (or a sensible amount) and return the amount of memory
 which was allocated to fill the cache (if any).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The amount of memory allocated to fill the factory.</DL>
</DD>
</DL>
<HR>

<A NAME="onRelease()"><!-- --></A><H3>
onRelease</H3>
<PRE>
protected abstract java.util.List&lt;java.nio.ByteBuffer&gt; <B>onRelease</B>()</PRE>
<DL>
<DD>Requires the implementation to iterate over all cached buffers (if any)
 and remove each one from the cache and add it to a List structure.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The list of ByteBuffers taken from the implementations cache.</DL>
</DD>
</DL>
<HR>

<A NAME="onFree(java.nio.ByteBuffer)"><!-- --></A><H3>
onFree</H3>
<PRE>
protected void <B>onFree</B>(java.nio.ByteBuffer&nbsp;buffer)</PRE>
<DL>
<DD>Tries to deallocate the buffer from memory immediately. This only works
 if the given buffer is a DirectBuffer.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>buffer</CODE> - The buffer to free from memory.</DL>
</DD>
</DL>
<HR>

<A NAME="allocate(int)"><!-- --></A><H3>
allocate</H3>
<PRE>
public java.nio.ByteBuffer <B>allocate</B>(int&nbsp;size)</PRE>
<DL>
<DD>Creates a ByteBuffer with a limit of the given size and a capacity
 greater than or equal to. The buffer returned will have a position of 
 zero and most likely will contain non-zero data.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#allocate(int)">allocate</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - The requested size of the allocated ByteBuffer.
<DT><B>Returns:</B><DD>The ByteBuffer allocated.</DL>
</DD>
</DL>
<HR>

<A NAME="allocate()"><!-- --></A><H3>
allocate</H3>
<PRE>
public java.nio.ByteBuffer <B>allocate</B>()</PRE>
<DL>
<DD>Allocates a ByteBuffer with the default size. The returning buffer will 
 have a position of zero and a limit of the default size.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#allocate()">allocate</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The ByteBuffer allocated.</DL>
</DD>
</DL>
<HR>

<A NAME="free(java.nio.ByteBuffer)"><!-- --></A><H3>
free</H3>
<PRE>
public boolean <B>free</B>(java.nio.ByteBuffer&nbsp;buffer)</PRE>
<DL>
<DD>Disposes a ByteBuffer. This buffer once given to this method should
 never be used again, it could be completely deallocated from memory. If
 the factory supports it the buffer may be cached for later use.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#free(java.nio.ByteBuffer)">free</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>buffer</CODE> - The buffer to dispose.
<DT><B>Returns:</B><DD>True if the buffer was cached in the factory, otherwise false.</DL>
</DD>
</DL>
<HR>

<A NAME="resize(java.nio.ByteBuffer, int)"><!-- --></A><H3>
resize</H3>
<PRE>
public java.nio.ByteBuffer <B>resize</B>(java.nio.ByteBuffer&nbsp;old,
                                  int&nbsp;size)</PRE>
<DL>
<DD>Performs a resize on the given ByteBuffer if necessary. If the capacity
 of the given buffer is less than or equal to the requested size the limit
 of the buffer will be adjusted to the new size. If the given buffer is
 not large enough for the requested size, a new buffer will be allocated
 (possible taken from cache) and all data in the given buffer will
 be copied to the new buffer. The returning buffer will have a position
 of zero and a limit of the given size.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#resize(java.nio.ByteBuffer, int)">resize</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>old</CODE> - The buffer to "resize" to the requested size.<DD><CODE>size</CODE> - The minimum capacity of the returned buffer, and the limit of the
                returned buffer.
<DT><B>Returns:</B><DD>The buffer with the data from the given buffer (between its start 
                and its limit) which has a limit matching the given size. The buffer
                returned could be the buffer given if it can hold the requested
                amount of data.</DL>
</DD>
</DL>
<HR>

<A NAME="release()"><!-- --></A><H3>
release</H3>
<PRE>
public java.util.List&lt;java.nio.ByteBuffer&gt; <B>release</B>()</PRE>
<DL>
<DD>Releases all elements from this class. This is the first step in 
 transfering the elements from this class into another Transferable.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/Transferable.html#release()">release</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/Transferable.html" title="interface in org.magnos.io">Transferable</A>&lt;java.nio.ByteBuffer&gt;</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>A list of transferable elements.</DL>
</DD>
</DL>
<HR>

<A NAME="transfer(java.util.List)"><!-- --></A><H3>
transfer</H3>
<PRE>
public java.util.List&lt;java.nio.ByteBuffer&gt; <B>transfer</B>(java.util.List&lt;java.nio.ByteBuffer&gt;&nbsp;elements)</PRE>
<DL>
<DD>Transfers all given elements into this class. This is the second step
 in transfering the elements from another Transferable into this class.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/Transferable.html#transfer(java.util.List)">transfer</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/Transferable.html" title="interface in org.magnos.io">Transferable</A>&lt;java.nio.ByteBuffer&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>elements</CODE> - The list of transferable elements released from another class.
<DT><B>Returns:</B><DD>The list of denied elements that could be transfered.</DL>
</DD>
</DL>
<HR>

<A NAME="clear()"><!-- --></A><H3>
clear</H3>
<PRE>
public long <B>clear</B>()</PRE>
<DL>
<DD>Clears the buffer factory of all cached buffers. This should have the 
 effect of setting the factory cached size to zero. The amount of memory
 released will be returned.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#clear()">clear</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The amount of memory deallocated in bytes.</DL>
</DD>
</DL>
<HR>

<A NAME="fill()"><!-- --></A><H3>
fill</H3>
<PRE>
public long <B>fill</B>()</PRE>
<DL>
<DD>Fills the BufferFactory cache (if it has one) with the maximum amount of
 buffers (or a sensible amount) and return the amount of memory which was
 allocated to fill the cache (in bytes).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#fill()">fill</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The amount of memory allocated to fill the factory.</DL>
</DD>
</DL>
<HR>

<A NAME="getSize()"><!-- --></A><H3>
getSize</H3>
<PRE>
public long <B>getSize</B>()</PRE>
<DL>
<DD>The amount of memory this BufferFactory is using to store cached buffers.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#getSize()">getSize</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The amount of memory used for cached buffers in bytes.</DL>
</DD>
</DL>
<HR>

<A NAME="getCapacity()"><!-- --></A><H3>
getCapacity</H3>
<PRE>
public long <B>getCapacity</B>()</PRE>
<DL>
<DD>The maximum amount of memory the factory can use to cache buffers.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#getCapacity()">getCapacity</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The maximum amount of memory usable for caching, in bytes.</DL>
</DD>
</DL>
<HR>

<A NAME="setCapacity(long)"><!-- --></A><H3>
setCapacity</H3>
<PRE>
public void <B>setCapacity</B>(long&nbsp;capacity)</PRE>
<DL>
<DD>Sets the maximum allowable amount of memory the factory can use to cache
 buffers.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#setCapacity(long)">setCapacity</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>capacity</CODE> - The maximum amount of memory usable for caching, in bytes.</DL>
</DD>
</DL>
<HR>

<A NAME="getAvailable()"><!-- --></A><H3>
getAvailable</H3>
<PRE>
public long <B>getAvailable</B>()</PRE>
<DL>
<DD>The amount of memory available to the factory for caching buffers.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#getAvailable()">getAvailable</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The amount of memory in bytes.</DL>
</DD>
</DL>
<HR>

<A NAME="getDefaultSize()"><!-- --></A><H3>
getDefaultSize</H3>
<PRE>
public int <B>getDefaultSize</B>()</PRE>
<DL>
<DD>The default size for allocating a ByteBuffer without specifying a desired
 size (i.e. BufferFactory.allocate()).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#getDefaultSize()">getDefaultSize</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The default size of the allocated buffers in bytes.</DL>
</DD>
</DL>
<HR>

<A NAME="setDefaultSize(int)"><!-- --></A><H3>
setDefaultSize</H3>
<PRE>
public void <B>setDefaultSize</B>(int&nbsp;size)</PRE>
<DL>
<DD>Sets the default size for allocating a ByteBuffer without specifying a 
 desired size (i.e. BufferFactory.allocate()).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html#setDefaultSize(int)">setDefaultSize</A></CODE> in interface <CODE><A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer">BufferFactory</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - The default size of the allocated buffers in bytes.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AbstractBufferFactory.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/magnos/io/buffer/BufferFactory.html" title="interface in org.magnos.io.buffer"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/magnos/io/buffer/AbstractBufferFactory.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractBufferFactory.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
